experiment:
  name: natron_v2
  seed: 42
  output_dir: runs/natron_v2
  device: cuda
  precision: bf16

data:
  csv_path: data/data_export.csv
  sequence_length: 96
  feature_cache_path: data/features.parquet
  label_cache_path: data/labels.parquet
  batch_size: 64
  num_workers: 4

features:
  rolling_windows: [5, 10, 14, 20, 30, 50, 96]
  volatility_windows: [10, 20, 30]
  momentum_windows: [5, 10, 14, 20, 30]
  volume_windows: [10, 20, 30]

labels:
  neutral_buffer: 0.001
  buy_sell_balance_target: 0.35
  class_balance_eps: 0.05

model:
  d_model: 256
  n_heads: 8
  num_layers: 6
  dim_feedforward: 512
  dropout: 0.1
  layer_norm_eps: 1e-5
  max_positions: 128

pretraining:
  mask_ratio: 0.15
  mask_value: 0.0
  temperature: 0.07
  epochs: 40
  lr: 1.0e-4
  weight_decay: 1.0e-5

supervised:
  epochs: 60
  lr: 1.0e-4
  weight_decay: 1.0e-5
  max_grad_norm: 1.0
  scheduler:
    patience: 5
    factor: 0.5

rl:
  enabled: false
  algo: ppo
  total_steps: 100000
  gamma: 0.99
  gae_lambda: 0.95
  clip_range: 0.2
  value_coef: 0.5
  entropy_coef: 0.01
  learning_rate: 3.0e-5
  reward:
    turnover_penalty: 0.001
    drawdown_penalty: 0.005

serving:
  model_path: model/natron_v2.pt
  host: 0.0.0.0
  port: 8000
  socket_port: 8765
